@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
  @*  <meta name="viewport" content="width=device-width" />*@
   <title>Mower Helper-Find an Mower Helper</title>
    <script src="~/Scripts/Expire.js" type="text/javascript"></script>
        <script type="text/javascript" language="javascript">
            function cleraralerts() {
                ValidateAlertClear('tblErrLicense', 'lblErrLicenseNum', 'tdErrLicenseNum', 'tdElicense', '#FFFFFF')
                ValidateAlertClear('tblErrLicense', 'lblErrLicenseDate', 'tdErrlicenseDate', 'tdELicDate', '#FFFFFF')

            }
            function funValidateLic() {
                // alert('1');
                // alert(document.getElementById('Tabverifiedusers_Tablicensesettings_tbllicenseedit_txtLicense').value);
                var strLicense = trim(document.getElementById('txtLicense').value);
                document.getElementById('txtLicense').value = strLicense;
                if (document.getElementById('txtLicense').value == "") {
                    cleraralerts();
                    //                Glb_ShowAlert("Enter license number, enter &#8216;xxxx&#8217; if you have no license number");
                    //                Glb_ShowAlert("Please enter license number");
                    ValidateAlert('tblErrLicense', 'lblErrLicenseNum', 'tdErrLicenseNum', 'tdElicense', 'Please enter license number')
                    document.getElementById('txtLicense').focus();
                    return false;
                }
                else {
                    ValidateAlertClear('tblErrLicense', 'lblErrLicenseNum', 'tdErrLicenseNum', 'tdElicense', '#FFFFFF')
                }
                if (MyChars(document.getElementById('txtLicense')) == "SpaceError") {
                    cleraralerts();
                    Glb_ShowAlert("Enter license number  without spaces first");
                    document.getElementById('txtLicense').focus();
                    return false;
                }


                if (fnCheckSpecialChars(document.getElementById('txtLicense')) == 0) {
                    cleraralerts();
                    //                var StrMsg = Glb_ShowAlert("Please enter license number correctly, there shouldn't be any special characters");
                    ValidateAlert('tblErrLicense', 'lblErrLicenseNum', 'tdErrLicenseNum', 'tdElicense', "Please enter license number correctly, there shouldn't be any special characters")
                    document.getElementById('txtLicense').focus();
                    return false;
                }
                else {
                    ValidateAlertClear('tblErrLicense', 'lblErrLicenseNum', 'tdErrLicenseNum', 'tdElicense', '#FFFFFF')
                }
                //            if (document.getElementById('txtexpirydate').value != '' && document.getElementById('txtexpirydate').value != 'mm/dd/yyyy') {
                //                if (CheckValidDate(document.getElementById('txtexpirydate')) == 0) {
                //                    return false;
                //                }
                //            }
                if (document.getElementById('txtexpirydate').value != '' && document.getElementById('txtexpirydate').value != 'mm/dd/yyyy') {
                    cleraralerts();
                    var Dateid = document.getElementById('txtexpirydate').value;
                    var Dat = Dateid.split("/");
                    var myDat = new Date(Dat[2], Dat[0] - 1, Dat[1])
                    var yearid = Dat[2];
                    var Monthid = Dat[0];
                    var MyId = Dat[1];
                    var CurDt = new Date()
                    var DatePat = /^(\d{1,2})\/(\d{1,2})\/(\d{4})$/;
                    var matchArray = Dateid.match(DatePat);

                    if (matchArray == null) {
                        //                    Glb_ShowAlert('Invalid license expiry date format!!! should be like mm/dd/yyyy');
                        cleraralerts();
                        ValidateAlert('tblErrLicense', 'lblErrLicenseDate', 'tdErrlicenseDate', 'tdELicDate', 'Invalid license expiry date format!!! should be like mm/dd/yyyy')
                        document.getElementById('txtexpirydate').focus();
                        return false
                    }
                    else {
                        ValidateAlertClear('tblErrLicense', 'lblErrLicenseDate', 'tdErrlicenseDate', 'tdELicDate', '#FFFFFF')
                    }
                    if (yearid < 1900) {
                        cleraralerts();
                        //                    Glb_ShowAlert('Invalid license expiry date!!! year should be greater than 1900');
                        ValidateAlert('tblErrLicense', 'lblErrLicenseDate', 'tdErrlicenseDate', 'tdELicDate', 'Invalid license expiry date!!! year should be greater than 1900')
                        document.getElementById('txtexpirydate').focus();
                        return false
                    }
                    else {
                        ValidateAlertClear('tblErrLicense', 'lblErrLicenseDate', 'tdErrlicenseDate', 'tdELicDate', '#FFFFFF')
                    }
                    if (Monthid > 12 || Monthid == 0) {
                        cleraralerts();
                        //                    Glb_ShowAlert('Invalid license expiry date!!! month should be entered in between 1 to 12');
                        ValidateAlert('tblErrLicense', 'lblErrLicenseDate', 'tdErrlicenseDate', 'tdELicDate', 'Invalid license expiry date!!! month should be entered in between 1 to 12')
                        document.getElementById('txtexpirydate').focus();
                        return false
                    }
                    else {
                        ValidateAlertClear('tblErrLicense', 'lblErrLicenseDate', 'tdErrlicenseDate', 'tdELicDate', '#FFFFFF')
                    }
                    if (MyId > 31 || MyId == 0) {
                        cleraralerts();
                        //                    Glb_ShowAlert('Invalid license expiry date!!! date should be entered in between 1 to 31');
                        ValidateAlert('tblErrLicense', 'lblErrLicenseDate', 'tdErrlicenseDate', 'tdELicDate', 'Invalid license expiry date!!! date should be entered in between 1 to 31')
                        document.getElementById('txtexpirydate').focus();
                        return false
                    }
                    else {
                        ValidateAlertClear('tblErrLicense', 'lblErrLicenseDate', 'tdErrlicenseDate', 'tdELicDate', '#FFFFFF')
                    }
//                    if (myDat < CurDt) {
//                        cleraralerts();
//                        //                    Glb_ShowAlert('Invalid license expiry date!!! should not be less than or equal to current date');
//                        ValidateAlert('tblErrLicense', 'lblErrLicenseDate', 'tdErrlicenseDate', 'tdELicDate', 'Invalid license expiry date!!! should not be less than or equal to current date')
//                        document.getElementById('txtexpirydate').focus();
//                        return false;
//                    }
//                    else {
//                        ValidateAlertClear('tblErrLicense', 'lblErrLicenseDate', 'tdErrlicenseDate', 'tdELicDate', '#FFFFFF')
//                    }
                }
            }
    </script>
                    <script type="text/javascript">

                        $(function () {
                            $("#txtexpirydate").datepicker({
                                showOn: "button",
                                buttonImage: "../Images/calender.gif",
                                buttonImageOnly: true
                            });
                        });
    </script>
                <style type="text/css">
        .ui-datepicker-trigger {margin-left : 5px;vertical-align : middle}
        .ui-datepicker {background: #AADDFF;border: 1px solid #555;color: #000000;}
        .Highlighted a {background-color: Green !important; background-image: none !important; color: White !important; font-weight: bold !important;font-size: 10pt;}
        .ui-widget-header  { font-size:15px;height:25px; }
    </style>
</head>
<body>
    @using (Html.BeginForm("Licensesettings", "VerificationUser", FormMethod.Post, null))
    {
        <input type="hidden" id="HdnProvider_ID" name="HdnProvider_ID" value="@ViewBag.ProviderId" />
        <div class="content-box-content">
                    <table class="border_style" cellspacing="1" cellpadding="8" width="100%" align="center"
                        border="0">


                                            <tr height="10" class="white_color" id="trlic1" runat="server">
                        <th align="right" width="25%">
                            <font color="red">*</font>&nbsp;<strong>License number :</strong>&nbsp;
                        </th>
                        <td align="left" id="tdElicense" runat="server" width="75%">

                               @Html.TextBox("txtLicense", (string)ViewBag.LicenseNo, new { @class = "textfield", MaxLength = "50", style = "width:150px", autocomplete = "off" })
                            &nbsp;&nbsp;
                             <span id="lbllicmsg" style="font-weight: bold; color: Black"></span>
                        </td>
                    </tr>
                    <tr height="10" class="white_color" runat="server" id="trveri1">
                        <th align="right" width="25%">
                            <strong>Is license verified :</strong>&nbsp;
                        </th>
                        <td align="left" runat="server" width="75%">

                                             @{ bool StrContCLMsg = false;
                                                bool StrConMToText = false;
                                                                                 }
                                                                               @if (ViewBag.IsLicenseVerified != null)
                                                                               {
                                                                                   if (ViewBag.IsLicenseVerified.ToString() == "Yes")
                                                                                   {
                                                                                       StrContCLMsg = true;
                                                                                   }
                                                                                   else
                                                                                   {
                                                                                       StrContCLMsg = false;

                                                                                   }
                                                                               }
                                                                             @Html.CheckBox("chkIsLicense", StrContCLMsg)
                            &nbsp;&nbsp;
                        </td>
                    </tr>
                    <tr height="10" runat="server" class="white_color" id="trexp1">
                        <th align="right" width="22%">
                           <strong>License expiry date :</strong>&nbsp;
                        </th>
                        <td align="left" id="tdELicDate" runat="server" width="78%">
                                @Html.TextBox("txtexpirydate", ((string)ViewBag.licenseexpirydate != null ? (string)ViewBag.licenseexpirydate : null), new { @class = "textfield", MaxLength = "15", style = "width:80px", autocomplete = "off", onfocus = "return ClearDate('txtexpirydate');" })&nbsp;&nbsp;
                            <span id="lblCDate_Edit" style="font-weight: bold; color: Black"></span>
                        </td>
                    </tr>
                    </table>
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" id="tblErrLicense" runat="server" style="display:none">
                                                  <tr class="white_color" align="center">
                        <td id="tdErrLicenseNum" height="30px" style="display: none;">
                             <span id="lblErrLicenseNum" style="font-weight: bold; color: Black"></span>
                        </td>
                    </tr>
                    <tr class="white_color" align="center">
                        <td id="tdErrlicenseDate" height="30px" style="display: none;">
                             <span id="lblErrLicenseDate" style="font-weight: bold; color: Black"></span>
                        </td>
                    </tr>
                                            </table>
                    <table border="0" cellpadding="0" cellspacing="0" width="100%">
                                                    <tr class="background_color">
                                                        <td align="right" style="padding-top: 5px; padding-bottom: 5px; padding-right: 10px;">
<input type="submit" id="btnSave" value="Save" title="Save" class="button" onclick="return funValidateLic();" />
                                              <input type="button" class="close2 button" name="Cancel" value="Cancel" />
                                                        </td>
                                                    </tr>
                                                </table>
                    </div>
    }
</body>
</html>

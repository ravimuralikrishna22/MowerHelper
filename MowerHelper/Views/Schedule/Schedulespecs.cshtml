@*@model MowerHelper.Models.Classes.StateCity  *@
@{
    Layout = null;
}
@using Obout.Mvc;
@using Obout.Mvc.ComboBox;
<!DOCTYPE html>
<html>
<head runat="server">
    @* <meta http-equiv="X-UA-Compatible" content="IE=Edge" />*@
    @*   <meta name="viewport" content="width=device-width" />*@
    <title>Mower Helper-Find an Mower Helper</title>
    @*  <link href="~/Content/style.css" rel="stylesheet" type="text/css" media="all" />*@
    @*    <script src="@ViewBag.src" type="text/javascript"></script>*@
    @Styles.Render("~/Content/themes/base/TherpistStyles")
    @*    @Scripts.Render("~/ThScripts/ThAjaxscripts")  *@
    @Scripts.Render("~/ThScripts/ThAjaxscripts")
    @Scripts.Render("~/ThScripts/ThOtherscripts")

    @*<script type="text/javascript" src="~/Scripts/jquery-1.7.1.js">    </script>
    <script  src="~/Scripts/jquery-ui-1.8.20.js" type="text/javascript"></script>*@
    @* <script src="~/Scripts/jquery.unobtrusive-ajax.js" type="text/javascript"></script>
    <script src="~/Scripts/jquery.validate.min.js" type="text/javascript"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>*@
    @*  <script  src="~/Scripts/flytooltip.js" type="text/javascript"></script>*@
    <style type="text/css">
        .ui-datepicker
        {
            background: #AADDFF;
            border: 1px solid #555;
            color: #000000;
        }

        .Highlighted a
        {
            background-color: Green !important;
            background-image: none !important;
            color: White !important;
            font-weight: bold !important;
            font-size: 10pt;
        }

        .ui-widget-header
        {
            font-size: 15px;
            height: 30px;
        }

        .ui-datepicker-multi .ui-datepicker-group
        {
            width: 100%;
        }

            .ui-datepicker-multi .ui-datepicker-group table
            {
                width: 100%;
            }

        .no-close .ui-dialog-titlebar-close
        {
            display: none;
        }

        .dvLoading .ui-dialog-titlebar
        {
            display: none;
        }

        * html .ui-autocomplete
        {
            width: 10px;
        }
    </style>
    <style type="text/css">
        input[type="radio"]
        {
            margin-right: 5px;
        }

        .ui-datepicker-trigger
        {
            margin-left: 5px;
            vertical-align: middle;
        }

        .item
        {
            position: relative !important;
            display: -moz-inline-stack;
            display: inline-block;
            zoom: 1;
            *display: inline;
            overflow: hidden;
            white-space: nowrap;
        }

        .header
        {
            margin-left: 2px;
        }

        .c1
        {
            width: 160px;
        }

        .c2
        {
            margin-left: 10px;
            width: 90px;
        }

        .multcolumn .ob_iCboICBC li
        {
            float: left;
            width: 60px;
        }

        /* For IE6 */
        * HTML .multcolumn .ob_iCboICBC li
        {
            -width: 55px;
        }

            * HTML .multcolumn .ob_iCboICBC li b
            {
                width: 55px;
                overflow: hidden;
            }

        .multcolumn2 .ob_iCboICBC li
        {
            float: left;
            width: 165px;
        }

        /* For IE6 */
        * HTML .multcolumn2 .ob_iCboICBC li
        {
            -width: 164px;
        }

            * HTML .multcolumn2 .ob_iCboICBC li b
            {
                width: 164px;
                overflow: hidden;
            }

        .confirmDialog1
        {
            /*background: url("../images/bg-button-green.gif") repeat-x scroll left top #459300 !important;
            border: 1px solid #459300 !important;*/
            background: repeat-x scroll left top #FF0000 !important;
            border: 1px solid #FF0000 !important;
            border-radius: 4px;
            color: #FFFFFF !important;
            cursor: pointer;
            display: inline-block;
            font-family: Verdana,Arial,sans-serif;
            font-size: 11px !important;
            padding: 4px 7px !important;
        }
    </style>
    <script type="text/javascript">
        function fnlanglat(cuname) {
            // alert("1");
            document.getElementById('cuname').value = cuname;
            alert(document.getElementById('cuname').value);
        }
        function onDateOver(selectedDate) {
            var strgroup = document.getElementById("apptdatevalue").value;
            var apptdate = new Date(selectedDate);
            var get_date = apptdate.getDate();
            var get_month = apptdate.getMonth() + 1;
            var get_year = apptdate.getFullYear();
            if (parseInt(get_month) < 10) {
                get_month = '0' + get_month;
            }
            if (parseInt(get_date) < 10) {
                get_date = '0' + get_date;
            }
            var newdate = get_month + '/' + get_date + '/' + get_year
            if (strgroup.indexOf(newdate) == -1) { }

            else {
                document.getElementById("lbltitle").innerHTML = 'Appointments for ' + newdate;
                var myArray1 = new Array();
                myArray1 = strgroup.split("$");
                var i = 0;
                var count = 0;
                for (i = 0; i < myArray1.length; i++) {
                    var myArray2 = myArray1[i].split("~");
                    if (myArray2[1] == newdate) {
                        count = count + 1;
                        addRow('tblflyappt', myArray2[0], myArray2[2], myArray2[3], myArray2[4], myArray2[5], myArray2[6], count);
                    }
                }
                document.getElementById("divappt").style.zIndex = '1005';
                document.getElementById("divappt").style.right = '275px';
                document.getElementById("divappt").style.top = '200px';
                document.getElementById("divappt").style.position = 'absolute';
                document.getElementById("divappt").style.display = '';
            }
            return false;
        }
        function onDateOut(selectedDate) {
            deleteRow('tblflyappt');
            document.getElementById("divappt").style.display = 'none';
            return false;
        }
        function addRow(tableID, patname, time, duration, adress, phone, courtlocname, slno) {
            if (courtlocname == null || courtlocname == '' || courtlocname == ' ') {
                courtlocname = '-';
            }
            var tbody = document.getElementById(tableID).getElementsByTagName("tbody")[1];
            var row = document.createElement("tr");
            var data = document.createElement("td");
            data.appendChild(document.createTextNode(slno));
            data.style.textAlign = "center";
            var data1 = document.createElement("td");
            data1.appendChild(document.createTextNode(patname));
            data1.style.textAlign = "center";
            var data2 = document.createElement("td");
            data2.appendChild(document.createTextNode(time));
            data2.style.textAlign = "center";
            var data3 = document.createElement("td");
            data3.appendChild(document.createTextNode(duration + ' Mins'));
            data3.style.textAlign = "center";
            var data4 = document.createElement("td");
            data4.appendChild(document.createTextNode(courtlocname));
            data4.style.textAlign = "center";
            var data5 = document.createElement("td");
            data5.appendChild(document.createTextNode(adress));
            data5.style.textAlign = "center";
            var data6 = document.createElement("td");
            data6.appendChild(document.createTextNode(phone));
            data6.style.textAlign = "center";
            row.appendChild(data);
            row.appendChild(data1);
            row.appendChild(data2);
            row.appendChild(data3);
            row.appendChild(data4);
            row.appendChild(data5);
            row.appendChild(data6);
            tbody.appendChild(row);
        }
        function deleteRow(tableID) {
            var table = document.getElementById(tableID);
            var tbody = document.getElementById(tableID).getElementsByTagName("tbody")[1];
            var rowCount = tbody.rows.length;
            for (var i = 0; i < rowCount; i++) {
                tbody.deleteRow(i); rowCount--; i--;
            }
        }
        function ComboBoxPr_ItemClick(sender, selectedIndex) {
            //alert(ComboBoxPr.selectedIndex());
            //alert(ComboBoxPr.options[selectedIndex].value);
            if (ComboBoxPr.selectedIndex() != -1) {
                var obj = ComboBoxPr.options[selectedIndex].value;
                //  alert(obj);
                document.getElementById("hdnPrid").value = obj;
                // alert(document.getElementById("hdnPrid").value);
                document.getElementById("hdnname").value = ComboBoxPr.options[selectedIndex].text;
                document.forms[0].submit();
            }
        }
        $(document).ready(function () {
            var prselect = "@ViewBag.Prselect";
            if (prselect != "Y") {
                $("#tblAdminMsg").show();
            }
            else {
                $("#tblAdminMsg").hide();
            }
            var timeinterval = "@ViewBag.timeinterval";
            if (timeinterval != '') {
                $("#lnkInterPlus").val("@ViewBag.timeinterval");
            }
            var SelectedDates = {};
            SelectedDates[new Date('12/20/2013')] = new Date('12/20/2013');
            var dates = document.getElementById('highlightdates').value;
            var dates1 = new Array();
            var redirectind = 1;
            dates1 = dates.split(",");
            $("#datepicker").datepicker
            ({
                dateFormat: 'mm/dd/yy',
                changeMonth: true,
                changeYear: true,
                //                showCurrentAtPos: 1,
                showWeeks: true,
                inline: true,
                numberOfMonths: [3, 1],
                yearRange: "2010:2020",
                onSelect: function () {
                    window.location = 'Schedulespecs?timeinterval=' + $('#lnkInterPlus').val() + '&apptdate=' + $("#datepicker").val() + '&redirectind=' + redirectind;
                    //                }
                },
                beforeShowDay: highlightDays

            });
            $("#datepicker").datepicker("setDate", document.getElementById("hdndate").value);
            function highlightDays(date) {
                for (var i = 0; i < dates1.length; i++) {
                    if (new Date(dates1[i]).toString() == date.toString()) {
                        return [true, 'Highlighted', dates[i]];
                    }
                }
                return [true, ''];
            }
            $(".ui-state-default").on("mouseenter", function () {
                $(this).attr('title', 'View Appointments');
            });
            $('.ui-state-default').mouseover(function () {
                var closest_datepicker = $(this).closest('div.ui-datepicker-group');
                var month = closest_datepicker.find('span.ui-datepicker-month').text();
                var year = closest_datepicker.find('span.ui-datepicker-year').text();
                if (month == "") {
                    var month1 = new Date();
                    var mon = $('.ui-datepicker-month').val();
                    month = parseInt(mon) + 1;
                    year = $('.ui-datepicker-year').val();
                }
                else {
                    month = closest_datepicker.find('span.ui-datepicker-month').text(); // $('.ui-datepicker-month').val();
                    switch (month) {
                        case "January": month = 1;
                            break;
                        case "February": month = 2;
                            break;
                        case "March": month = 3;
                            break;
                        case "April": month = 4;
                            break;
                        case "May": month = 5;
                            break;
                        case "June": month = 6;
                            break;
                        case "July": month = 7;
                            break;
                        case "August": month = 8;
                            break;
                        case "September": month = 9;
                            break;
                        case "October": month = 10;
                            break;
                        case "November": month = 11;
                            break;
                        case "December": month = 12;
                            break;
                        default: break;
                    }
                    year = closest_datepicker.find('span.ui-datepicker-year').text(); // $('.ui-datepicker-year').val();
                }
                var obj1 = month + "/" + $(this).text() + "/" + year;
                //alert(obj1);
                onDateOver(obj1);

            });
            $('.ui-state-default').mouseout(function () {
                var closest_datepicker = $(this).closest('div.ui-datepicker-group');
                var month = closest_datepicker.find('span.ui-datepicker-month').text();
                var year = closest_datepicker.find('span.ui-datepicker-year').text();
                if (month == "") {
                    var month1 = new Date();
                    month = month1.getMonth() + 1;
                    year = month1.getFullYear();
                }
                else {
                    month = closest_datepicker.find('span.ui-datepicker-month').text(); // $('.ui-datepicker-month').val();
                    switch (month) {
                        case "January": month = 1;
                            break;
                        case "February": month = 2;
                            break;
                        case "March": month = 3;
                            break;
                        case "April": month = 4;
                            break;
                        case "May": month = 5;
                            break;
                        case "June": month = 6;
                            break;
                        case "July": month = 7;
                            break;
                        case "August": month = 8;
                            break;
                        case "September": month = 9;
                            break;
                        case "October": month = 10;
                            break;
                        case "November": month = 11;
                            break;
                        case "December": month = 12;
                            break;
                        default: break;

                    }
                    year = closest_datepicker.find('span.ui-datepicker-year').text(); // $('.ui-datepicker-year').val();
                }
                var obj1 = month + "/" + $(this).text() + "/" + year;
                onDateOut(obj1);
            });
            $('#lnkschduletypes').mouseover(function () {
                document.getElementById("divlegend").style.zIndex = '1005';
                document.getElementById("divlegend").style.left = '480px';
                document.getElementById("divlegend").style.top = '140px';
                document.getElementById("divlegend").style.position = 'absolute';
                document.getElementById("divlegend").style.display = '';
            });
            $('#lnkschduletypes').mouseout(function () {
                document.getElementById('divlegend').style.display = 'none';
            });
            $("#lnltasks").mouseover(function () {
                document.getElementById("lblTasktitle").innerHTML = "@ViewBag.tasktitle";
                document.getElementById("divTask").style.zIndex = '1005';
                document.getElementById("divTask").style.left = '480px';
                document.getElementById("divTask").style.top = '160px';
                document.getElementById("divTask").style.position = 'absolute';
                document.getElementById("divTask").style.display = '';
            });
            $("#lnltasks").mouseout(function () {
                document.getElementById("divTask").style.display = 'none';
            });
            $("#lnkInterPlus").change(function () {
                var sdate;
                if (document.getElementById("hdndate").value != '') {
                    sdate = document.getElementById("hdndate").value;
                }
                else {
                    sdate = $("#datepicker").val();
                }
                window.location = 'Schedulespecs?timeinterval=' + $('#lnkInterPlus').val() + '&apptdate=' + sdate;
            });

            $("#datepicker").on('click', '.ui-datepicker-next', function () {
                var mon = $('.ui-datepicker-month').val();
                month = parseInt(mon) + 1;
                year = $('.ui-datepicker-year').val();
                var obj = month + '/' + '01' + '/' + year;
                window.location = 'Schedulespecs?timeinterval=' + $('#lnkInterPlus').val() + '&apptdate=' + obj;
            });
            $("#datepicker").on('click', '.ui-datepicker-prev', function () {
                //alert($("#datepicker").val());
                var mon = $('.ui-datepicker-month').val();
                month = parseInt(mon) + 1;
                year = $('.ui-datepicker-year').val();
                var obj = month + '/' + '01' + '/' + year;
                window.location = 'Schedulespecs?timeinterval=' + $('#lnkInterPlus').val() + '&apptdate=' + obj;
                // $("#datepicker").datepicker("refresh");
                //onDateOver(obj);
            });
            $("#datepicker").on('change', '.ui-datepicker-month', function () {
                var mon = $('.ui-datepicker-month').val();
                month = parseInt(mon) + 1;
                year = $('.ui-datepicker-year').val();
                var obj = month + '/' + '01' + '/' + year;
                window.location = 'Schedulespecs?timeinterval=' + $('#lnkInterPlus').val() + '&apptdate=' + obj;
            });
            $("#datepicker").on('change', '.ui-datepicker-year', function () {
                //alert($("#datepicker").val());
                var mon = $('.ui-datepicker-month').val();
                month = parseInt(mon) + 1;
                year = $('.ui-datepicker-year').val();
                var obj = month + '/' + '01' + '/' + year;
                window.location = 'Schedulespecs?timeinterval=' + $('#lnkInterPlus').val() + '&apptdate=' + obj;
                // $("#datepicker").datepicker("refresh");
                //onDateOver(obj);
            });

            @*  var role_id = '@Session["roleid"]';
            var Prselect = '@ViewBag.Prselect';
            if (role_id != "1" || Prselect == "Y")
                {

                    var strtechname = "@ViewBag.techid";
                    if (strtechname != '') {
                        $("#Ddltech").val("@ViewBag.techid");
                    }

                    var tech_count = '@ViewBag.tech_count';
                    if (tech_count > 1) {
                        document.getElementById('Ddltech').style.display = '';
                        document.getElementById('spanpname').style.display = 'none';
                        document.getElementById('spancolan').style.display = '';

                    }
                    else {
                        document.getElementById('Ddltech').style.display = 'none';
                        document.getElementById('spanpname').style.display = '';
                        document.getElementById('spancolan').style.display = 'none';
                    }
                    $("#Ddltech").change(function () {
                        var sdate;
                        if (document.getElementById("hdndate").value != '') {
                            sdate = document.getElementById("hdndate").value;
                        }
                        else {
                            sdate = $("#datepicker").val();
                        }
                        stechid = document.getElementById("Ddltech").value;
                        var techname = $('#Ddltech option:selected').html();
                        window.location = 'Schedulespecs?timeinterval=' + $('#lnkInterPlus').val() + '&apptdate=' + sdate + '&Ddltech=' + stechid + '&techname=' + techname;
                    });
                }*@
        });
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCgKM4MCuYrILJ8CFPR-a5xXelNuobdK50" async defer></script>
    @* <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false">
    </script>*@
    <script type="text/javascript">
        $(document).ready(function () {
            var scrollind = '@ViewBag.scrolind';
                var ddlshind = '@ViewBag.ddlschind';
                //alert(scrollind);
                //alert(ddlshind);
                if (scrollind == '1' && ddlshind == 'Y') {
                    window.scrollTo(0, 100);
                }
                if (scrollind == '2' && ddlshind == 'Y') {
                    window.scrollTo(0, 1200);
                }
            });
    </script>
    <script type="text/javascript">
        function fnmaplanglat(aid) {

            $.getJSON("GetMapAddressDetails", { appointid: aid },
              function (data) {

                  var geocoder = new google.maps.Geocoder();
                  var address = data.l_GoogleMapPath;
                  var courtname = data.CourtLocationName;
                  if (courtname != null && courtname != "") {
                      courtname = "(" + courtname + ")";
                  }
                  // var add=address.replace('-',',').trim();
                  // alert(address);
                  geocoder.geocode({ 'address': address }, function (results, status) {
                      if (status == google.maps.GeocoderStatus.OK) {
                          var latitude = results[0].geometry.location.lat();
                          var longitude = results[0].geometry.location.lng();
                          var latlng = new google.maps.LatLng(latitude, longitude);
                          var myOptions = {
                              zoom: 15,
                              center: latlng,
                              mapTypeId: google.maps.MapTypeId.ROADMAP
                          };
                          map = new google.maps.Map(document.getElementById("custmermap"), myOptions);
                          var marker = new google.maps.Marker
                          (
                              {
                                  position: new google.maps.LatLng(latitude, longitude),
                                  map: map
                              }
                          );
                          var infowindow = new google.maps.InfoWindow({ content: "<div style='padding-bottom: 9pt; width:275px;'><b>" + courtname + " " + address + "</b></div>" });
                          infowindow.open(map, marker);
                          google.maps.event.addListener(marker, 'click', function () {
                              infowindow.open(map, marker);
                          });

                      }
                      else if (data.ErrorMessage == 'false') {
                          alert('Session is expired. You will be redirected to session expired page');
                          window.location = '@Url.Action("SessionExpire", "Home")';
                      }
                      else {
                          alert("Request failed.")
                      }
                  });

                  $("#custmermap").dialog({
                      width: 1000, height: 600, modal: true
                  });


              });
          return false;

      }
      function fnlanglat(patientid) {
          $.getJSON("Getaddress", { patid: patientid },
function (data) {

    var geocoder = new google.maps.Geocoder();
    var address = data.l_GoogleMapPath;
    geocoder.geocode({ 'address': address }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            var latitude = results[0].geometry.location.lat();
            var longitude = results[0].geometry.location.lng();
            //alert("Latitude: " + latitude + "\nLongitude: " + longitude);

            var latlng = new google.maps.LatLng(latitude, longitude);
            var myOptions = {
                zoom: 15,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById("custmermap"), myOptions);
            var marker = new google.maps.Marker
            (
                {
                    position: new google.maps.LatLng(latitude, longitude),
                    map: map
                }
            );
            var infowindow = new google.maps.InfoWindow({ content: "<div style='padding-bottom: 9pt; width:275px;'>" + address + "</div>" });
            infowindow.open(map, marker);
            google.maps.event.addListener(marker, 'click', function () {
                infowindow.open(map, marker);
            });

        }
        else if (data.ErrorMessage == 'false') {
            alert('Session is expired. You will be redirected to session expired page');
            window.location = '@Url.Action("SessionExpire", "Home")';
        }
        else {
            alert("Request failed.")
        }
    });


    $("#custmermap").dialog({
        width: 900, height: 600, modal: true
    });

});

}
    </script>
    <script type="text/javascript">
        function getprintview() {
            var techid = ''; //document.getElementById('Ddltech').value;
            //if (techid == "All") {
            //    techid = null;
            //}
            // var parm = document.getElementById("Ddltech");;
            var selected_text = null;// parm.options[parm.selectedIndex].text;;
            //  alert(selected_text);
            //  var e = document.getElementById("<%=Ddltech.ClientID%>");
            // var selectedtext = e.options[e.selectedIndex].text;
            //if (selected_text == "All") {
            //    selected_text = null;
            //}
            var apptdate = null;
            var ApptType = null;
            var beginDate = null;
            var endDate = null;
            window.location.href = "../Schedule/Printableview?beginDate=" + beginDate + "&endDate=" + endDate + "&ApptType=" + ApptType + "&techid=" + techid + "&apptdate=" + '@ViewData["hdndate"]' + "&technm=" + selected_text;
                  @*@Html.ActionLink("Printable view", "Printableview", new { @apptdate = ViewData["hdndate"], @beginDate = "null", @endDate = "null", @ApptType = "null" }, new { @class = "button", @style = "text-decoration:none;" })*@
            }
    </script>
    <script type="text/javascript">
        $("#btnClear").live("click", function () {
            // window.location = "../Schedule/Schedulespecs";
            $.ajax({
                url: "../Schedule/Schedulespecs",
                data: { hid: '@TempData["hdnPrid"]' },
                success: function (data) {
                    window.location = "../Schedule/Schedulespecs";
                }
            });
        });
    </script>
</head>
<body id="dayappt">

    @using (Html.BeginForm("Schedulespecs", "Schedule", FormMethod.Get, null))
    {
        @Html.Hidden("cuname")
    
        <input id="apptdatevalue" type="hidden" name="apptdatevalue" value="@ViewData["highlightapptdate"]" />
        <input id="highlightdates" type="hidden" name="highlightdates" value="@ViewData["highlightdates"]" />
        <input id="hdndate" type="hidden" value="@ViewData["hdndate"]"/>
        <input type="hidden" id="hdnPrid" name="hdnPrid" />
        @Html.Hidden("hdnname")
        <div>
            @{Html.RenderAction("Topsection", "Tools");}
        </div> 
        <div id="main-content">

            @if (Session["roleid"].ToString() == "1")
            {
                <table border="0" cellpadding="8" cellspacing="1" width="100%" id="tblAdmin" class="border_style">
                    <tr class="white_color" id="tblAdminMsg">
                        <td colspan="3">
                            <strong>@ViewBag.prvmsg </strong>
                        </td>
                    </tr>
                    <tr>
                        <td width="25%" align="right">
                            <strong>Mower Helper &nbsp;: &nbsp; &nbsp;</strong>
                        </td>
                        <td width="75%" align="left">
                            @Html.Obout(new ComboBox("ComboBoxPr")
                   {
                       Width = 500,
                       MenuWidth = 500,
                       Height = 200,
                       AutoPostBack = false,
                       EnableLoadOnDemand = true,
                       OnLoadingItems = "Schedule/LoadingItems1",
                       EmptyText = "-- Select Mower Helper --",
                       HeaderTemplate = new Obout.Mvc.OboutMvcTemplate<ComboBoxHeaderTemplateContainerInfo>(
                       @:<div class="header c1">Mower Helper name</div>
),

                       ItemTemplate = new Obout.Mvc.OboutMvcTemplate<ComboBoxItem>(

                       @:<div class="item c1">@(((MowerHelper.Models.BLL.Patients.PatientRegistration)item.DataItem).ProviderName)</div>
),
                       ClientSideEvents = new ComboBoxClientSideEvents()
                       {
                           //OnSelectedIndexChanged = "ComboBoxPr_ItemClick",
                           OnItemClick = "ComboBoxPr_ItemClick"

                       }
                   })
                            @* </td>
                        <td width="35%" align="left">*@
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            <a id="btnClear" href="#" @*onclick="return btnclear();"*@ title="Clear">
                                <img alt="" id="" src="~/Images/refreshimages.png" style="width: 30px;" /></a>
                        </td>
                    </tr>
                </table>
            }
            @if (Session["roleid"].ToString() != "1" || @ViewBag.Prselect == "Y")
            {                
                <table width="100%" cellpadding="0" cellspacing="0">

                    <tr id="trtabsadmin" runat="server">
                        <td width="100%" class="navigation">
                            <div class="admin-tab">
                                <a class="admin-link" id="admincust" href="Schedulespecs"><span>Day</span>
                                </a>
                            </div>
                            <div class="admin-tab">
                                <a class="inadmin-link" id="admintask" href="WeeklyAppts"><span>Week</span>
                                </a>
                            </div>

                            <div class="admin-tab">
                                <a class="inadmin-link" id="adminnote" href="ViewProvMonthlySchedule"><span>Month</span>
                                </a>
                            </div>
                            <div class="admin-tab">
                                <a class="inadmin-link" id="adminContact" href="ViewYearlySchedule"><span>Year</span>
                                </a>
                            </div>
                        </td>
                    </tr>

                    <tr class="background_color">
                        <td id="tdtabsadmin" class="tab-background" width="100%">
                            <table cellspacing="0" id="tblAppt" runat="server" cellpadding="0" width="98%" border="0">
                                <tr style="background: none">
                                    <td valign="top" align="center" width="75%">

                                        <table border="0" cellpadding="8" cellspacing="1" class="border_style" width="98%">
                                            <tr class="white_color">
                                                <td width="12%" style="text-align: center; background-color: #1d70ab;">
                                                    <strong>@Html.ActionLink((string)ViewData["Pre_date"], "Schedulespecs", new { @apptdate = ViewData["Pre_date"], timeinterval = "07:00-07:00" }, new { style = "color:white", @Title = ViewData["Pre_date1"] })</strong>
                                                </td>
                                                <td style="text-align: center; background-color: #1d70ab;">
                                                    <span style="padding-right: 0px;"><strong style="color: white;">Schedule for</strong>  </span>
                                                    @*<span id="spancolan"><strong style="color: white;">&nbsp;:&nbsp;</strong></span>
                                                    <span>@Html.DropDownList("Ddltech", Model.Techlist, "All", new { @style = "width:200px;height:25px;font:13px;" })</span>*@
                                                    <span id="spanpname">&nbsp;<strong style="color: white;">@ViewBag.practicename</strong></span>&nbsp;
                                                                          <strong style="color: white;">on</strong>
                                                    <strong style="color: white;">@TempData["msg"]</strong>
                                                </td>
                                                <td width="12%" style="text-align: center; background-color: #1d70ab;">
                                                    <strong>@Html.ActionLink((string)ViewData["Next_date"], "Schedulespecs", new { @apptdate = ViewData["Next_date"], timeinterval = "07:00-07:00" }, new { style = "color:white", @id = "Next", @class = "Next", @Title = ViewData["Next_date1"] })</strong>
                                                </td>
                                            </tr>
                                        </table>
                                        <table cellspacing="0" cellpadding="0" width="98%" align="center" border="0">
                                            <tr class="nav_blue_color" id="trinterval" runat="server" style="height: 20px">
                                                <td align="left" width="13%" style="background-color: #d0e4f4">
                                                    <select id="lnkInterPlus" style="width: 112px; height: 25px; font-size: 13px;">
                                                        <option value="07:00-07:00">7AM/7PM</option>
                                                        <option value="12:00-12:00">12AM/12PM</option>
                                                    </select>
                                                </td>
                                                <td align="left" style="padding-left: 150px; background-color: #d0e4f4;"></td>
                                            </tr>
                                        </table>
                                        @Html.Raw(ViewBag.daysch)
                                    </td>
                                    <td width="25%" id="tddate" valign="top" align="right">
                                        <table width="100%" cellpadding="0" cellspacing="0" align="left">
                                            <tr style="background: none;">
                                                <td id="tdItems" valign="top">
                                                    @* <table width="100%" align="left" >
                                             <tr style="background: none;">
                                                 <td style="padding-bottom:545px;"  > *@
                                                    <a onclick="return getprintview();" class="button" style="text-decoration: none;">Printable view</a>
                                                    @*@Html.ActionLink("Printable view", "Printableview", new { @apptdate = ViewData["hdndate"], @beginDate = "null", @endDate = "null", @ApptType = "null" }, new { @class = "button", @style = "text-decoration:none;" })*@

                                                    <span>
                                                        <br />
                                                        <br />
                                                        <br />
                                                        <br />
                                                    </span>

                                                    @if (Session["roleid"].ToString() != "1" && ViewBag.Showtask == "Y")
                                                    {
                                               
                                                        <a href="#" id="lnltasks" style="font-weight: bold; font-size: 12px; color: #0066cc">Today tasks list</a>
                                                        <span>
                                                            <br />
                                                            <br />
                                                            <br />
                                                            <br />
                                                        </span>   
                                                    }
                                                    <a href="#" id="lnkschduletypes" style="font-weight: bold; font-size: 12px; color: #0066cc"
                                                        onclientclick="return false">Color legend</a>
                                                    @*  </td>
                                                 </tr></table> *@

                                                </td>
                                                <td valign="top" align="center">
                                                    @*<table width="100%" align="left" >
                                             <tr style="background: none;">
                                                 <td style="padding-bottom:550px;"  >*@
                                                    <div style="width: 212px; margin-right: 0px;" id="datepicker">
                                                    </div>
                                                    @*   </td>
                                                 </tr></table> *@
                                                </td>
                                            </tr>
                                        </table>
                                        @* <table id="tbldate"  align="right">
                                 <tr style="background: none;">
                                    
                                 </tr>
                             </table>*@
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            }
            <div id="AddApptlDialog" title="Add Appointment">
            </div>
            <div id="dialog-confirm" title="Mower Helper" style="display: none">
            </div>
            <div id="EditlDialog" title="Edit Appointment">
            </div>
            @*   <div id="ViewlDialog" title="View Appointment">
            </div>*@
            <div id="custmermap" title="Appointment address"></div>
            <div id="PlayAudioDialog" title="Audio play"></div>
        </div>
        <div>
            @{Html.RenderAction("Bottomsections", "Tools");}
        </div>
    
        <div id="divTask" style="width: 350px; display: none">
            <div class="content-box">
                <div class="content-box-header">
                    <h3>
                        <span id="lblTasktitle" runat="server"></span>
                    </h3>
                </div>
                <div class="clear">
                </div>
                <div class="content-box-content">
                    @Html.Raw(ViewBag.todaysTask)
                </div>
            </div>
        </div>
        <div id="divappt" style="width: 700px; display: none;">
            <div class="content-box">
                <div class="content-box-header">
                    <h3>
                        <span id="lbltitle" runat="server"></span>
                    </h3>
                </div>
                <div class="clear">
                </div>
                <div class="content-box-content">
                    <table id="tblflyappt" cellpadding="4" cellspacing="1" width="100%" align="center"
                        class="border_style">
                        <tbody>
                            <tr class="tr_bgcolor">
                                <td style="width: 3%; text-align: center;">
                                    <b>#</b>
                                </td>
                                <td style="width: 20%; text-align: center;">
                                    <b>Client name</b>
                                </td>
                                <td style="width: 10%; text-align: center;">
                                    <b>Appt. time</b>
                                </td>
                                <td style="width: 8%; text-align: center;">
                                    <b>Duration</b>
                                </td>
                                <td style="width: 15%; text-align: center;">
                                    <b>Court location name</b>
                                </td>
                                <td style="text-align: center;">
                                    <b>Address</b>
                                </td>
                                <td style="width: 13%; text-align: center;">
                                    <b>Phone</b>
                                </td>
                            </tr>
                        </tbody>
                        <tbody class="white_color">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div id="divlegend" style="width: 500px; display: none;">
            <table id="tblPalet" border="1" cellpadding="12" cellspacing="0" width="500px"
                align="center">
                <tr>
                    <td style="text-align: center; background-color: #996699;">
                        <strong>Blocked</strong>
                    </td>
                    <td style="text-align: center; background-color: #d0e4f4;">
                        <strong>Working hours</strong>
                    </td>
                    <td style="text-align: center; background-color: #c4d23a">
                        <strong>Scheduled</strong>
                    </td>
                </tr>
            </table>
        </div>
     
        <a href="#" id="lnkccinfo" class="ccinfo" onclick="return Displaydialog('CCDialog', '../Schedule/Addnewpaymentmethod?cardexpiry=' +'@ViewBag.ccexpiry' +'&ccexists='+'@ViewBag.noexist', 'auto', 850, 'dvLoading', null, null);"></a>

        <div id="CCDialog" title="Payment information">
        </div>
        <div id="divcustmtransaction" title="Client transaction">
        </div>
        <div id="dvLoading" style="display: none; text-align: center; vertical-align: middle">
            <img src="../Images/ajax-loader2.gif" alt="Processing" />
        </div>                
    }
    <script type="text/javascript">
        // alert(navigator.userAgent);
        var isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        if (isMobile == true) {
            $('#datepicker').css("width", "232px")
            //  $('#Ddltech').css("width", "180px")
        }
        //  alert(isMobile);datepicker
    </script>
    @* Add Appointment*@
    <script type="text/javascript">
        function combobox1_ItemClick(sender, selectedIndex) {
            var obj = combobox1.options[selectedIndex].value;
            //           alert(obj); 

            $.ajax({
                type: "get",
                contentType: "application/json;charset=utf-8",
                url: "../Schedule/GetPatientInfo",
                data: { "patientid": obj },
                dataType: "json",
                success: Result
            });
        }
        function Result(data) {
            if (data.ErrorMessage == 'false') {
                alert('Session is expired. You will be redirected to session expired page');
                window.location = '@Url.Action("SessionExpire", "Home")';
             }
             //  $("#txtcptcode").val(data[0].CPTCode);
             $("#hdnPatLoginid").val(data[0].PatientLogin_ID);
             $("#Patname").val(data[0].PatientName);
             $("#Bussinessname").val(data[0].Bussinessname);
             $("#Provider_cellphoneno").val(data[0].Provider_cellphoneno);
             $("#cellphone").val(data[0].cellphone);
             //alert(data[0].PatientEmail);
             if (data[0].PatientEmail != "") {
                 //alert("1");
                 $("#hdnEmailID").val(data[0].PatientEmail);
             }
             document.getElementById('txtNotes').focus();
             if (document.getElementById('hdnplaceind').value == "Y") {
                 //document.getElementById("lblPatPlace").innerHTML = data[0].PatientName + "'s place";
                 document.getElementById('trPlaceofAppointment').style.display = '';
                 //$("#OtherAddressItemList option:selected").text("My Location");
                 $('#OtherAddressItemList option').filter(function () { return $.trim($(this).text()) == 'My Location'; }).attr('selected', true);
                 $('#OtherAddressItemList').change();
                 //$('#OtherAddressItemList').val($('#OtherAddressItemList').text('My Location'));
                 // $('select[id^="OtherAddressItemList"] option[text="My Location"]').attr("selected", "selected");
             } else {
                 document.getElementById('trPlaceofAppointment').style.display = "none";
             }
         }
    </script>
    @* End Appointment*@
    @* Edit Appointment*@
    <script type="text/javascript">
        function combobox115_Open(sender) {
            combobox5.OpenOnFocus = true;
        }
        function combobox115_Focus(sender) {
            combobox5.OpenOnFocus = false;

        }
    </script>
    @* End Edit App*@
</body>
<script type="text/javascript">
    $.ajaxSetup({ cache: false });
    var linkObj;
    $('#PlayAudioDialog').dialog({
        autoOpen: false,
        width: 700,
        resizable: false,
        height: 400,
        modal: true
    });
    $(".showPlayaudio").click(function () {
        linkObj = $(this);
        var dialogDiv = $('#PlayAudioDialog');
        $('#dvLoading').dialog({ modal: true, dialogClass: 'dvLoading', draggable: false, resizable: false });
        var viewUrl = linkObj.attr('href');
        $.get(viewUrl, function (data) {
            dialogDiv.html(data);
            $('#dvLoading').dialog('destroy');
            dialogDiv.dialog('open');
        });
        return false;
    });
    function AddAppt(timeperiod, apptdate) {
        $('#EditlDialog').html('');
        var viewUrl = '../Schedule/AddNewAppointment?id=' + timeperiod + "&apptdate=" + "" + apptdate;
        Displaydialog('AddApptlDialog', viewUrl, 'auto', 930, 'dvLoading', null, null);
        return false;
    }
    function EditAppt(apptid, cphone) {
        $('#AddApptlDialog').html('');
        var viewUrl = '../Schedule/EditAppointment?apptEid=' + apptid + '&frompage=dayview' + '&cphone=' + cphone;
        Displaydialog('EditlDialog', viewUrl, 'auto', 930, 'dvLoading', null, null);
        return false;
    }
    //$('#AddApptlDialog').dialog({
    //    autoOpen: false,
    //    width: 930,
    //    resizable: false,         
    //    modal: true
    //});
    //$(".schedulemenu").click(function () {
    //    $('#EditlDialog').html('');
    //    linkObj = $(this);
    //    var dialogDiv = $('#AddApptlDialog');
    //    $('#dvLoading').dialog({ modal: true, dialogClass: 'dvLoading', draggable: false, resizable: false });
    //    var viewUrl = linkObj.attr('href');
    //    $.get(viewUrl, function (data) {
    //        dialogDiv.html(data);
    //        $('#dvLoading').dialog('destroy');
    //        dialogDiv.dialog('open');
    //    });
    //    return false;
    //});

    //$('#EditlDialog').dialog({
    //    autoOpen: false,
    //    width: 930,
    //    resizable: false,        
    //    modal: true
    //});
    //$.ajaxSetup({ cache: false });
    //$(".EditDialog").click(function () {
    //    $('#AddApptlDialog').html('');
    //    linkObj = $(this);
    //    var dialogDiv = $('#EditlDialog');
    //    $('#dvLoading').dialog({ modal: true, dialogClass: 'dvLoading', draggable: false, resizable: false });
    //    var viewUrl = linkObj.attr('href');
    //    $.get(viewUrl, function (data) {
    //        dialogDiv.html(data);
    //        $('#dvLoading').dialog('destroy');
    //        dialogDiv.dialog('open');
    //    });
    //    return false;
    //});
    //$('#ViewlDialog').dialog({
    //    autoOpen: false,
    //    width: 1200,
    //    height: 400,
    //    resizable: false,
    //    modal: true
    //});
    //$(".ViewDialog").click(function () {
    //    linkObj = $(this);
    //    var dialogDiv = $('#ViewlDialog');
    //    $('#dvLoading').dialog({ modal: true, dialogClass: 'dvLoading', draggable: false, resizable: false });
    //    var viewUrl = linkObj.attr('href');
    //    $.get(viewUrl, function (data) {
    //        dialogDiv.html(data);
    //        $('#dvLoading').dialog('destroy');
    //        dialogDiv.dialog('open');
    //    });
    //    return false;
    //});        
    $('#dialog-confirm').dialog({
        autoOpen: false,
        height: 170,
        resizable: false,
        width: 350,
        show: { effect: 'drop', direction: "up" },
        modal: true,
        buttons: {
            "Yes": function () {
                $("#delapptForm").submit();
            },
            "No": function () {
                $(this).dialog("close");
            }
        }

    });

    $(".confirmDialog").click(function () {
        linkObj = $(this);
        var dialogDiv = $('#dialog-confirm');
        var viewUrl = linkObj.attr('href');
        $.get(viewUrl, function (data) {
            dialogDiv.html(data);
            dialogDiv.dialog('open');
        });
        return false;
    });
    $(".close").live("click", function (e) {
        e.preventDefault();
        $(this).closest(".dialog").dialog("close");

    });
    $(".AddApptclose").live("click", function (e) {
        e.preventDefault();
        $('#AddApptlDialog').dialog('close');
    });

    $(".EditApptclose").live("click", function (e) {
        e.preventDefault();
        $('#EditlDialog').dialog('close');
    });

    //$(".ViewApptclose").live("click", function (e) {
    //    e.preventDefault();
    //    $('#ViewlDialog').dialog('close');
    //});
    $(".Renewclose").live("click", function (e) {
        e.preventDefault();
        $('#CCDialog').dialog('close');
    });
    function updateSuccess(data) {
        document.body.style.cursor = 'default';
        if (data.Success == true) {
            var apptdates = data.Object.StartDate;
            var redirectind = "1";
            window.location = '../Schedule/Schedulespecs?timeinterval=' + "07:00-07:00" + "&apptdate=" + apptdates + "&redirectind=" + redirectind;
            $('#AddApptlDialog').dialog('close');
        }
        else {
            if (data.ErrorMessage == "1") {
                alert('Appointment already exists for the given time to the client');
                $('#AddApptlDialog').dialog('open');
            }
            else if (data.ErrorMessage == "2") {
                alert('Appointment already exists for the given time.');
                $('#AddApptlDialog').dialog('open');
            }
            else if (data.ErrorMessage == "Please select valid cpt code") {
                alert('Please select valid cpt code.');
                $('#AddApptlDialog').dialog('open');
                document.getElementById('txtcptcode').focus();
            }
             @*else if (data.ErrorMessage == 'false') {
                 alert('Session is expired. You will be redirected to session expired page');
                 window.location = '@Url.Action("SessionExpire", "Home")';
             }*@
             else if (data.ErrorMessage == 'Client has already appointment for the same time') {
                 if (data != '_Logon_') {
                     alert(data.ErrorMessage);
                 }
             }
             else {
                 if (data != "_Logon_") {
                     var obj = confirm(data.ErrorMessage);
                     if (obj == true) {
                         document.getElementById("hdnValidInd").value = "Y";
                         $("#updateCarForm").submit();
                         $('#AddApptlDialog').dialog('close');
                     }
                     else {
                         $('#AddApptlDialog').dialog('open');
                     }
                 }
             }
 }
}
function EditApptSuccess(data) {
    document.body.style.cursor = 'default';
    if (data.Success == true) {
        var apptdates = data.Object.StartDate;
        window.location = '../Schedule/Schedulespecs?timeinterval=' + "07:00-07:00" + "&apptdate=" + apptdates;
        $('#EditlDialog').dialog('close');
    }
    else {
        if (data.ErrorMessage == "1") {
            alert('Appointment already exists for the given time to the client');
            $('#EditlDialog').dialog('open');
        }
        else if (data.ErrorMessage == "2") {
            alert('Appointment already exists for the given time.');
            $('#EditlDialog').dialog('open');
        }
        else if (data.ErrorMessage == "Please select valid cpt code") {
            alert('Please select valid cpt code.');
            $('#EditlDialog').dialog('open');
            document.getElementById('txtCptcode').focus();
        }
             @*else if (data.ErrorMessage == 'false') {
                 alert('Session is expired. You will be redirected to session expired page');
                 window.location = '@Url.Action("SessionExpire", "Home")';
             }*@
             else if (data.ErrorMessage == "\r\nThere is a conflict on selected date time.\r\n Do you still want to create appointment?") {
                 var obj = confirm(data.ErrorMessage);
                 if (obj == true) {
                     document.getElementById("Editfutreapnt_Ind").value = "Y";
                     $("#EditapptForm").submit();
                     $('#EditlDialog').dialog('close');
                 }
                 else {
                     $('#EditlDialog').dialog('close');
                 }
             }
             else if (data.ErrorMessage == "Do you want to update future appointments?") {
                 var obj = confirm(data.ErrorMessage);
                 if (obj == true) {
                     document.getElementById("Editfutreapnt_Ind").value = "Y";
                     $("#EditapptForm").submit();
                     $('#EditlDialog').dialog('close');
                 }
                 else {
                     document.getElementById("Editfutreapnt_Ind").value = "N";
                     $("#EditapptForm").submit();
                     $('#EditlDialog').dialog('close');

                 }
             }
             else if (data.ErrorMessage == "Appointment already exists for the Same client.")
             { alert(data.ErrorMessage); }
             else {
                 if (data != "_Logon_") {
                     var obj = confirm(data.ErrorMessage);
                     if (obj == true) {
                         document.getElementById("Editfutreapnt_Ind").value = "Null";
                         $("#EditapptForm").submit();
                         $('#EditlDialog').dialog('close');
                     }
                     else {
                         $('#EditlDialog').dialog('close');
                     }
                 }
             }
 }
}
function delSuccess(data) {
    if (data.Success == true) {
        var apptdates = data.Object.getPagedate;
        window.location = '../Schedule/Schedulespecs?timeinterval=' + "07:00-07:00" + "&apptdate=" + apptdates;
        $('#dialog-confirm').dialog('close');
    }
        //else if (data.ErrorMessage == 'expire') {
        //    window.location.href = '../Home/SessionExpire';
        //}
    else {
        if (data != "_Logon_") {
            $('#dialog-confirm').dialog('close');
            var obj = confirm(data.ErrorMessage);
            if (obj == true) {
                document.getElementById("futureInd").value = "Y";
                $("#delapptForm").submit();
            }
            else {
                $('#dialog-confirm').dialog('close');
                if (confirm('Do you want to Delete this Appointment?')) {
                    document.getElementById("futureInd").value = "C";
                    $("#delapptForm").submit();
                }
                else {
                    $('#dialog-confirm').dialog('close');
                }
            }
        }
    }
}
//$('#CCDialog').dialog({
//    autoOpen: false,
//    width: 850,
//    resizable: false,
//    dialogClass: 'no-close',
//    position: ['middle', 40],
//    modal: true
//});
//$("#lnkccinfo").click(function () {
//    $('#divrenewimg').hide();
//    linkObj = $(this);
//    var dialogDiv = $('#CCDialog');
//    $('#dvLoading').dialog({ modal: true, dialogClass: 'dvLoading', draggable: false, resizable: false });
//    var viewUrl = linkObj.attr('href');         
//    $.get(viewUrl, function (data) {
//        dialogDiv.html(data);
//        $('#dvLoading').dialog('destroy');
//        dialogDiv.dialog('open');
//        return false;
//    });
//    return false;
//});
$(document).ready(function () {
    var divo = "@ViewBag.noexist ";
         var expiry = "@ViewBag.ccexpiry";
         var Msgitem = "@ViewBag.Msgitem";
         var Serviceactive = "@ViewBag.Serviceactive";
         var ccexists = "@Session["CCexists"]";

         var Registeredin = "@Session["Registeredin"]";
         var phoneno_read_ind = "@Session["phoneno_read_ind"]";
         if (Msgitem != '5') {
             //if ($.trim(divo) == 'N' || $.trim(expiry) == 'Y') {
             $('.ccinfo').click();
             //}
         }
         if (Serviceactive == "N") {
             $('.ccinfo').click();
         }
         if (Msgitem == '5' && ccexists == 'N' && Registeredin == 'W') {
             $('.ccinfo').click();
         }
         if (Registeredin == 'M' && phoneno_read_ind == 'N' && ccexists == 'N') {
             //   alert('1');
             $('.ccinfo').click();
         }
     });
     function InfoSuccess(data) {
         if (data != '' & data.Success == true) {
             var RegInd = data.Object.RegInd;
             // alert(RegInd);
             if (RegInd == "Y") {
                 window.location = '../Home/ActivationLink';
                 //$("#divmsg").dialog({
                 //    modal: true,
                 //    width: 600,
                 //    resizable: false,
                 //    closeOnEscape: false,
                 //    dialogClass: 'no-close',
                 //    open: function (event, ui) { $('body').css('overflow', 'hidden'); $('.ui-widget-overlay').css('width', '100%'); },
                 //    close: function (event, ui) { $('body').css('overflow', 'auto'); },
                 //    buttons: {
                 //        "OK": function () {
                 //            window.location = '../Home/Index';

                 //        }
                 //    }

                 //});
             }
             else {
                 window.location = '../Directory/ViewIdentifyingInfo';
             }
         }
             //else if (data.ErrorMessage == 'expire') {
             //    window.location.href = '../Home/SessionExpire';
             //}
         else {
             alert(data.ErrorMessage);
             $('#CCDialog').dialog('open');
             document.body.style.cursor = 'pointer';
             document.getElementById("div10").style.display = '';
             document.getElementById("updNote").style.display = 'none';
             //$("#update-message").html(data.ErrorMessage);
             $("#update-message").show();
         }
     }


     //$('#divcustmtransaction').dialog({
     //    autoOpen: false,
     //    width: 900,
     //    resizable: false,
     //    modal: true,
     //    position: ['middle', 40],
     //    open: function (event, ui) { $('body').css('overflow', 'hidden'); $('.ui-widget-overlay').css('width', '100%'); $("#txtPayAmount").focus(); },
     //    close: function (event, ui) { $('body').css('overflow', 'auto'); }

     //});
     function fncustmtransactions(obj, obj1) {
         //var dialogDiv = $('#divcustmtransaction');
         var id = obj;
         //  alert(document.getElementById("ComboBoxPr").value);
         var roleid = '@Session["roleid"]';
         if (roleid == "1") {
             var proid = document.getElementById("ComboBoxPr").value;
         }
         else {
             proid = null;
         }
         var schetype = "day";
         //$('#dvLoading').dialog({ modal: true, dialogClass: 'dvLoading', draggable: false, resizable: false });
         var viewUrl = '../Schedule/CustomerTransactions?id=' + id + '&proid=' + proid + '&schetype=' + schetype + '&appid=' + obj1;
         Displaydialog('divcustmtransaction', viewUrl, 'auto', 930, 'dvLoading', null, null);
         //$.get(viewUrl, function (data) {
         //    dialogDiv.html(data);
         //    $('#dvLoading').dialog('destroy');
         //    dialogDiv.dialog('open');
         //});
         // $('#dvLoading').dialog('close');
         return false;
     }
     $(".transclose").live("click", function (e) {
         e.preventDefault();
         $(this).closest("#divcustmtransaction").dialog("close");

     });
</script>
<script type="text/javascript">


    $(document).ready(function () {
        //$(".showmap").live("click", function (e) {
        //    //alert("12");
        //    //alert(document.getElementById('glat').value);
        //    //alert(document.getElementById('glong').value);
        //    //alert("1");
        //    //var latitue = document.getElementById('glat').value;
        //    //var longti = document.getElementById('glong').value;
        //    //var latlng = new google.maps.LatLng(longti,latitue);
        //    //var options = {
        //    //    zoom: 8, center: latlng,
        //    //    mapTypeId: google.maps.MapTypeId.ROADMAP
        //    //};

        //    //var map = new google.maps.Map(document.getElementById
        //    //("custmermap"), options);
        //    //var marker = new google.maps.Marker({
        //    //    position: new google.maps.LatLng(longti, latitue),
        //    //    map: map
        //    //});
        //    //marker.setMap(map);
        //    ////var infowindow = new google.maps.InfoWindow({ content: "<b>User Address</b><br/> Latitude:" + longti + "<br /> Longitude:" + latitue + "" });
        //    //var infowindow = new google.maps.InfoWindow({ content: "<div style='padding-bottom: 9pt; width:250px;'><b>User Address</b><br/><b> Latitude:" + longti + "<br /> Longitude:" + latitue + "</div>" });
        //    //infowindow.open(map, marker);
        //    var strAddress = $(this).text();
        //    //alert(strAddress);
        //    if (strAddress.indexOf("<BR>")) {
        //        strAddress = strAddress.replace(/<BR>/g, " ");
        //    }
        //    if (strAddress.indexOf("<br>")) {
        //        strAddress = strAddress.replace(/<br>/g, " ");
        //    }
        //    var WINDOW_HTML = '<div style="padding-bottom: 9pt;height:50px;">' + strAddress + '<br></div>'
        //    if (GBrowserIsCompatible()) {
        //        var map = new GMap2(document.getElementById("custmermap"));
        //        map.addControl(new GSmallMapControl());
        //        geocoder = new GClientGeocoder();
        //        if (geocoder) {
        //            geocoder.getLatLng(
        //                      strAddress,
        //                      function (point) {
        //                          if (!point) {
        //                          } else {
        //                              map.setCenter(point, 14);
        //                              var marker = new GMarker(point);
        //                              GEvent.addListener(marker, "click", function () {
        //                                  marker.openInfoWindowHtml(WINDOW_HTML);
        //                              });
        //                              map.openInfoWindowHtml(map.getCenter(), WINDOW_HTML);
        //                              map.addOverlay(marker);
        //                              marker.setImage("http://gmaps-samples.googlecode.com/svn/trunk/markers/blue/blank.png");
        //                          }
        //                      }
        //                    );
        //        }
        //    }
        //    $("#custmermap").dialog({
        //        width: 1000, height: 600, modal: true
        //    });
        //});
        $(".close").live("click", function (e) {
            e.preventDefault();
            $("#custmermap").dialog("close");

        });
        var TopIndex = '@Session["TopIndex"]';
         $("#Menu0").removeClass();
         $("#Menu1").addClass("active");
         $("#Menu2").removeClass();
         $("#Menu3").removeClass();
     });
</script>
</html>

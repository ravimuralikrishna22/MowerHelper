@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
@*    <meta name="viewport" content="width=device-width" />*@
    <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
   <title>Mower Helper-Find an Mower Helper</title>
@*       <link href="~/Content/style.css" rel="stylesheet" type="text/css" media="all" />
    <script src="~/SCRIPTS/scriptCognetwork.js" type="text/javascript"></script>
    <link href="~/Content/themes/base/jquery.ui.all.css" rel="stylesheet" type="text/css" />
        <script src="~/Scripts/jquery-1.7.1.js" type="text/javascript"></script>
 <script src="~/Scripts/jquery-ui-1.8.11.js" type="text/javascript"></script>
        <link href="~/Content/flytooltip.css" rel="stylesheet" type="text/css" />
   <script  src="~/Scripts/flytooltip.js" type="text/javascript"></script>*@
                 @Styles.Render("~/Content/themes/base/TherpistStyles")
         @Scripts.Render("~/ThScripts/ElectricianHelpscripts")

            <script type="text/javascript">
              
                $(document).ready(function () {
                    $('#ddlrecords').val("10");
                    $("#SentMessageslist").load("@Url.Action("DisplaySentMessages", "Messages")?ddlListingMsgsType=" + $('#ddlListingMsgsType').val() + "&ddlrecords=" + $('#ddlrecords').val(), function (data) { });
                    var psize = $('#hdnpagesize').val();
                    if (psize != '') {
                     
                        $('#ddlrecords').val(psize);
                    }
                    else {
                        $('#ddlrecords').val("10");

                    }
                    var Type = $('#hdnType').val();
                    if (Type != '') {
                        $('#ddlListingMsgsType').val(Type);
                    }
                    else {
                        $('#ddlListingMsgsType').val("New");

                    }

                });
    </script>
    <script type="text/javascript">
        var curPage;
        $(document).ready(function () {
            $(".close").live("click", function (e) {
                var dialogDiv = $('#ReplyDialog');
                dialogDiv.dialog('close');
            });
        });

    </script>
    <script type="text/javascript">
        function ondescriptionover(obj) {            
            // alert(obj);
            document.getElementById(obj).style.position = 'absolute';
            document.getElementById(obj).style.display = '';
            return false;
        }
        function ondescriptionout(obj) {
            //alert(obj);
            document.getElementById(obj).style.display = 'none';
            return false;
        }
    </script>
    <style type="text/css">
           tr.gridHead th:nth-child(1) { width: 10px; }
          tr.gridHead th:nth-child(2) { width: 70px; }
          tr.gridHead th:nth-child(3) { width: 300px; }
          tr.gridHead th:nth-child(4) { width: 300px; }
          tr.gridHead th:nth-child(5) { width: 300px; }
          tr.gridHead th:nth-child(6) { width: 300px; }
          tr.gridHead th:nth-child(7) { width: 200px; }
          tr.gridHead th:nth-child(8) { width: 80px; }
          tr.gridRow td:nth-child(3) { width: 300px;text-align:left; }
          tr.gridAltRow td:nth-child(3) { width: 300px;text-align:left; }
          tr.gridRow td:nth-child(4) { width: 300px;text-align:left; }
          tr.gridAltRow td:nth-child(4) { width: 300px;text-align:left; }
          tr.gridRow td:nth-child(5) { width: 300px;text-align:left; }
          tr.gridAltRow td:nth-child(5) { width: 300px;text-align:left; }
          tr.gridRow td:nth-child(6) { width: 300px;text-align:left; }
          tr.gridAltRow td:nth-child(6) { width: 300px;text-align:left; }
    </style>
</head>
<body>
    @using (Html.BeginForm("SentMessages", "Messages", FormMethod.Get, null))
    {
    <div>
        @{Html.RenderAction("Topsection", "Tools");}
    </div>
   
    <div id="main-content">
        <table width="100%" cellpadding="0" cellspacing="0" border="0">
            <tr class="background_color">
                <td align="left" valign="top" width="100%">
                      <table width="100%" cellpadding="0" cellspacing="0">
                  @if (Session["roleid"].ToString() == "4" || Session["roleid"].ToString() == "39")
                  {
                            <tr id="trtabs1" runat="server">
                                <td width="100%" class="navigation">
                                   
                                  @*  <div class="admin-tab">
                                        <a class="inadmin-link" id="acontent"  href="../Billing/TransactionDisplay"><span>Customer Transactions</span>
                                        </a>
                                    </div>*@
                                 @*   <div class="admin-tab">
                                        <a class="inadmin-link" id="avideo" href="VideoAudioFiles" ><span>Video/Audio Files</span>
                                        </a>
                                    </div>*@
                                    <div class="admin-tab">
                                        <a class="inadmin-link" id="adocument1" href="../OfficeExpenses/ExpenseLedger" ><span>My Business Expenses</span>
                                        </a>
                                    </div>
                                   @* <div class="admin-tab">
                                        <a class="inadmin-link" id="adocument" href="../Notes/ProfileNotes"><span>Notes</span>
                                        </a>
                                    </div>*@
                                         <div class="admin-tab">
                                        <a class="inadmin-link" id="adocument2" href="../Common/PasswordManagement" ><span>Password Management</span>
                                        </a>
                                    </div>
                                    <div class="admin-tab">
                                        <a class="inadmin-link" id="adocument3" href="../Admin/FT_servicesTransaction" ><span>Mower Helper Transactions</span>
                                        </a>
                                    </div>
                                     @if (ViewBag.Showtask == "Y")
                                     {
                                    <div class="admin-tab">
                                        <a class="inadmin-link" id="adocument4" href="../Task/TaskList" ><span>Tasks</span>
                                        </a>
                                    </div>
                                     }
                                      @*<div class="admin-tab">
                                        <a class="inadmin-link" id="adocument5" href="@Url.Action("Index","Technicians")" ><span>Technicians</span>
                                        </a>
                                    </div>*@
                                   <div class="admin-tab">
                                    <a class="inadmin-link" href="../Admin/FTservices_addnewpayment" id="acontent"><span>Payment method</span>
                                    </a>
                                </div>
                                    <div class="admin-tab">                                        
                                        <a class="admin-link" href="../Messages/MessageFromHelp" id="amsgcontent"><span>Messages</span></a>
                                    </div>
                                     @*<div class="admin-tab">                                        
                                        <a class="inadmin-link" href="../Article/ArticleJqGrid" id="aArticles"><span>Articles</span></a>
                                    </div>*@
                                    @if(ViewBag.Showforums=="Y"){
                                      <div class="admin-tab">
                                    <a class="inadmin-link" href="../Forums/ForumsHome" id="acontent5"><span>Forums</span>
                                    </a>
                                </div>
                                    }
                                </td>
                            </tr>
                  }
                            <tr  class="background_color">
                                <td id="tdtabs1" class="tab-background"   width="100%">
                                 <div >
       @{Html.RenderAction("Msg_Main", "Messages", new { @Tabid = "6" });}
                                 
                                    </div>
    <br />
                    <table width="100%" cellpadding="0" cellspacing="0" border="0">
                         @if (Session["roleid"].ToString() != "1")
                                {
                        <tr id="trtabs">
                            <td width="100%" class="navigation">
                                <div class="admin-tab">
                                @{int FromThhelpCount = Convert.ToInt32(ViewBag.FromThhelpCount);}
                                    <a class="inadmin-link" href="MessageFromHelp" id="afromtherapisthelp"><span id="FromTennisHelp"></span>    @*<span>FromTennis Coach Help&nbsp;&nbsp;(@FromThhelpCount)</span>*@
                                    </a>
                                </div>

                                    @if (Session["roleid"].ToString() != "31" & Session["roleid"].ToString() != "38" && ViewBag.ShowElectricians == "Y")
                                    {
                                <div class="admin-tab">
                                  @{int FromPublicCount = Convert.ToInt32(ViewBag.FromPublicCount);}
                                    <a class="inadmin-link" id="aFrompubliclisting" href="PublicMessages"><span>From public profile page&nbsp;&nbsp;(@FromPublicCount)</span>
                                    </a>
                                </div>
                                    }
                                        @if (Session["roleid"].ToString() == "31")
                                        {
                                          <div class="admin-tab">
                                                                @{int supervisercnt = Convert.ToInt32(ViewBag.supervisercnt);}
                                    <a class="inadmin-link" id="afromverificationsuperviser" href="FromVerificationSupervisor"><span>From Verification Supervisor&nbsp;&nbsp;(@supervisercnt)</span>
                                    </a>
                                </div>
                                        }
                                                                                                                           @if (ViewBag.Roleid == "38")
                                                                                                                           {
                                          <div class="admin-tab">
                                                                @{int vusercount = Convert.ToInt32(ViewBag.vusercount);}
                                    <a class="inadmin-link" id="afromverificationuser" href="Fromverificationuser"><span>From Verification users&nbsp;&nbsp;(@vusercount)</span>
                                    </a>
                                </div>
                                                                                                                           }
                                                                                                                                                                          @if (ViewBag.Roleid == "4" && ViewBag.Showschedule == "Y" && ViewBag.ShowElectricians == "Y")
                                                                                                                                               {
                                          <div class="admin-tab">
                                                                @{int vusercount = Convert.ToInt32(ViewBag.aptreqcount);}
                                    <a class="inadmin-link" id="aschedulemessage" href="ScheduleMessages"><span>Appointment Requests&nbsp;&nbsp;(@vusercount)</span>
                                    </a>
                                </div>
                                            }
                                        
                                                                <div class="admin-tab">
                                                                @{int Sentcount = Convert.ToInt32(ViewBag.Sentcount);}
                                    <a class="admin-link" id="aSentMessages" href="SentMessages"><span id="SentMessages"></span>      @*<span>Sent messages&nbsp;&nbsp;(@Sentcount)</span>*@
                                    </a>
                                </div>
                            </td>
                        </tr>
                             }
                               @if (Session["roleid"].ToString() == "1")
                                {
                             <tr id="trtabs1">
                            <td width="100%" class="navigation">
                                <div class="admin-tab">
                                    @{int FromcontactCount = Convert.ToInt32(ViewBag.contactcount);}
                                    <a class="inadmin-link" href="Contactusentries" id="acontactus"><span>Contact us entries&nbsp;(@FromcontactCount)</span>
                                    </a>
                                </div>
                                                                <div class="admin-tab">
                                    @{int supervisercnt = Convert.ToInt32(ViewBag.supervisercnt);}
                                    @{int vusercount = Convert.ToInt32(ViewBag.vusercount);}
                                      @{int vericount = supervisercnt + vusercount;}
                                    <a class="inadmin-link" id="aFromveri" href="Fromveriuserandsup"><span>From verification user/supervisor&nbsp;(@vericount)</span>
                                    </a>
                                </div>

                                                                <div class="admin-tab">
                                                                 @{int paapcount = Convert.ToInt32(ViewBag.paapcount);}
                                    @{int newpaapcount = Convert.ToInt32(ViewBag.Newpaapcount);}
                                    @{int practicecount = paapcount + newpaapcount;}
                                    <a class="inadmin-link" id="afromnewpaap" href="frompractices"><span>From Mower Helper&nbsp;(@practicecount)</span>
                                    </a>
                                </div>
                                <div class="admin-tab">
                                    @{int Sentcount = Convert.ToInt32(ViewBag.Sentcount);}
                                    <a class="admin-link" id="aSentMessages" href="SentMessages"><span>Sent messages&nbsp;(@Sentcount)</span>
                                    </a>
                                </div>
                            </td>
                        </tr>
                                   }
                        <tr class="background_color">
                            <td id="tdtabs" class="tab-background" width="100%">
                                <div class="content-box">
                                    <div class="content-box-header">
                                        <table id="Table1" cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
                                            <tr>
                                                <td width="60%">
                                                    <h3>
                                                        Sent messages</h3>
                                                </td>
                                                                                                <td width="20%" align="center">
                                                                                                     <ul style="list-style: none!important; padding-right: 5px; padding-top: 5px;" class="content-box-tabs">
                                                        <li><strong>Filter by :&nbsp;</strong>
                                                            @Html.DropDownList("ddlListingMsgsType", new List<SelectListItem>

                                                              {
                                                               new SelectListItem{ Text="New", Value = "New" },
                                                               new SelectListItem{ Text="Archived", Value = "Archive" }
                                                              },
                                                             new {  onchange = "return ddlchange()", style = "font-family:arial;font-size:13px;height:20px;width:90px;" })
                                                        </li>
                                                    </ul>
                                                    </td>
                                                <td width="20%" align="center">
                                                    <ul style="list-style: none!important; padding-right: 5px; padding-top: 5px;" class="content-box-tabs">
                                                        <li><strong>Rows per page :&nbsp;</strong>
                                                       @*  @{Html.RenderAction("Rowsperpage", "Profiles", new { @id = "1" });}*@
                                                            @Html.DropDownList("ddlrecords", new List<SelectListItem>

                                                              {
                                                               new SelectListItem{ Text="5", Value = "5" },
                                                               new SelectListItem{ Text="10", Value = "10" },
                                                               new SelectListItem{ Text="15", Value = "15" },
                                                               new SelectListItem{ Text="20", Value = "20" }, 
                                                               new SelectListItem{ Text="25", Value = "25" }, 
                                                               new SelectListItem{ Text="30", Value = "30" }, 
                                                               new SelectListItem{ Text="35", Value = "35" },
                                                               new SelectListItem{ Text="40", Value = "40" },
                                                               new SelectListItem{ Text="45", Value = "45" },
                                                               new SelectListItem{ Text="50", Value = "50" }, 
                                                              },
                                                             new { onchange = "return ddlrecordsNo()", style = "font-family:arial;font-size:13px;height:20px;width:48px;" })
                                                        </li>
                                                    </ul>
                                                </td>
                                            </tr>
                                        </table>
                                        <div class="clear">
                                        </div>
                                    </div>
                                   

                                     <div id="SentMessageslist">
                                            <img src="../Images/ajax-loader2.gif" alt="Processing" style="margin-left:550px"/>

                                    </div>
                                </div>
                            </td>
                        </tr>
                    </table>
                                    </td></tr></table>
                </td>
            </tr>
        </table>
    </div>
    <div id="dialog-confirm" title="Mower Helper" style="display: none;">
        <p>
            <span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 20px 0;"></span>
            Do you want to archive the message?
        </p>
    </div>
            <input id="hdnpagesize" type="hidden" value="@ViewBag.Msgpagesize"/>
        <input id="hdnType" type="hidden" value="@ViewBag.Type"/>
                       <div id="dvLoading" style="display: none; text-align: center; vertical-align: middle">
            <img src="../Images/ajax-loader2.gif" alt="Processing" />
        </div>
  

    }
        <script type="text/javascript">
            $(".confirmDialog").live("click", function (e) {

                var url = $(this).attr('href');
                $("#dialog-confirm").dialog({
                    autoOpen: false,
                    height: 170,
                    width: 350,
                    show: { effect: 'drop', direction: "up" },
                    modal: true,
                    buttons: {
                        "Yes": function () {
                            $(this).dialog("close");
                            //window.location = url;
                            //alert(url);
                            url = url + "&ddlListingMsgsType=" + $('#ddlListingMsgsType').val() + "&ddlrecords=" + $('#ddlrecords').val() + "&curPage=" + curPage;
                            $('#dvLoading').dialog({ modal: true, dialogClass: 'dvLoading', draggable: false, resizable: false });
                            $("#SentMessageslist").load(url, function (data) { $('#dvLoading').dialog("close"); });
                        },
                        "No": function () {
                            $(this).dialog("close");

                        }
                    }
                });
                $("#dialog-confirm").dialog('open');
                return false;
            });
    </script>
     <script type="text/javascript">
         $(document).ready(function () {
             var TopIndex = '@Session["TopIndex"]';
             var roleid = '@Session["roleid"]';
             if (roleid != 1) {
                 $("#Menu0").removeClass();
                 $("#Menu1").removeClass();
                 $("#Menu2").removeClass();
                 $("#Menu4").addClass("active");
                 $("#Menu3").removeClass();
             }
             else {
                 $("#Menu0").removeClass();
                 $("#Menu1").removeClass();
                 $("#Menu2").addClass("active");
                 $("#Menu3").removeClass();
             }
             if (roleid != 4 & roleid != 39) {
                 document.getElementById('tdtabs1').className = '';
                 document.getElementById('tdtabs1').className = 'background_color';
             }
         });
         function ddlrecordsNo() {
             $('#dvLoading').dialog({ modal: true, dialogClass: 'dvLoading', draggable: false, resizable: false });
             $("#SentMessageslist").load("@Url.Action("DisplaySentMessages", "Messages")?ddlListingMsgsType=" + $('#ddlListingMsgsType').val() + "&ddlrecords=" + $('#ddlrecords').val(), function (data) { $('#dvLoading').dialog("close"); });
         }
         function ddlchange() {
             $('#dvLoading').dialog({ modal: true, dialogClass: 'dvLoading', draggable: false, resizable: false });
             $("#SentMessageslist").load("@Url.Action("DisplaySentMessages", "Messages")?ddlListingMsgsType=" + $('#ddlListingMsgsType').val() + "&ddlrecords=" + $('#ddlrecords').val(), function (data) { $('#dvLoading').dialog("close");});
          }
    </script>
</body>
</html>

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
@*    <meta name="viewport" content="width=device-width" />*@
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <title>Mower Helper-Find an Mower Helper</title>
    @*        <link href="~/Content/style.css" rel="stylesheet" type="text/css" media="all" />
    <script src="~/SCRIPTS/scriptCognetwork.js" type="text/javascript"></script>
    <link href="~/Content/themes/base/jquery.ui.all.css" rel="stylesheet" type="text/css" />
        <script src="~/Scripts/jquery-1.7.1.js" type="text/javascript"></script>
 <script src="~/Scripts/jquery-ui-1.8.11.js" type="text/javascript"></script>
        <link href="~/Content/flytooltip.css" rel="stylesheet" type="text/css" />
   <script  src="~/Scripts/flytooltip.js" type="text/javascript"></script>*@
    @Styles.Render("~/Content/themes/base/TherpistStyles")
    @Scripts.Render("~/ThScripts/ElectricianHelpscripts")
    <script type="text/javascript">
        var curPage;
        $(document).ready(function () {
            var Type = $('#hdntype').val();
            if (Type != '') {
                $('#ddlListingMsgsType').val(Type);
            }
            else {
                $('#ddlListingMsgsType').val("NEWviewed");

            }
            var psize = $('#hdnpagesize').val();
            if (psize != '') {
                $('#ddlrecords').val(psize);
            }
            else {
                $('#ddlrecords').val("10");

            }

        });
    </script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#MessageFrom").load("@Url.Action("DisplayMessageFromHelp", "Messages")?ddlListingMsgsType=" + $('#ddlListingMsgsType').val() + "&ddlrecords=" + $('#ddlrecords').val(), function (data) { });
            $(".close").live("click", function (e) {
                var dialogDiv = $('#ReplyDialog');
                dialogDiv.dialog('close');
                return false;
            });

            $(".close").live("click", function (e) {
                var dialogDiv = $('#TopicDialog');
                dialogDiv.dialog('close');
                $("#MessageFrom").load("@Url.Action("DisplayMessageFromHelp", "Messages")" + "?ddlListingMsgsType=" + $('#ddlListingMsgsType').val() + "&ddlrecords=" + $('#ddlrecords').val() + "&page=" + curPage, function (data) { });
                return false;
              @*  window.location.href = '@Url.Action("MessageFromHelp", "Messages")';*@
            });
        });

    </script>
    <style type="text/css">
        .dvLoading .ui-dialog-titlebar
        {
            display: none;
        }

        tr.gridHead th:nth-child(1)
        {
            width: 15%;
        }

        tr.gridHead th:nth-child(2)
        {
            width: 10%;
        }

        tr.gridHead th:nth-child(3)
        {
            width: 55%;
        }

        tr.gridHead th:nth-child(4)
        {
            width: 10%;
        }

        tr.gridHead th:nth-child(5)
        {
            width: 10%;
        }

        tr.gridRow td:nth-child(3)
        {
            width: 55%;
            text-align: left;
        }

        tr.gridAltRow td:nth-child(3)
        {
            width: 55%;
            text-align: left;
        }
        .gridTable
        {
            width: 100%;
        }
    </style>

</head>
<body>
    @using (Html.BeginForm("MessageFromHelp", "Messages", FormMethod.Get, null))
    {
        <div>
            @{Html.RenderAction("Topsection", "Tools");}
        </div>      
        <div id="main-content">
            <table width="100%" cellpadding="0" cellspacing="0" border="0">
                <tr class="background_color">
                    <td align="left" valign="top" width="100%">
                         <table width="100%" cellpadding="0" cellspacing="0">
                  @if (Session["roleid"].ToString() == "4" || Session["roleid"].ToString() == "39")
                  {
                            <tr id="trtabs1" runat="server">
                                <td width="100%" class="navigation">
                                   
                                  @*  <div class="admin-tab">
                                        <a class="inadmin-link" id="acontent"  href="../Billing/TransactionDisplay"><span>Customer Transactions</span>
                                        </a>
                                    </div>*@
                                 @*   <div class="admin-tab">
                                        <a class="inadmin-link" id="avideo" href="VideoAudioFiles" ><span>Video/Audio Files</span>
                                        </a>
                                    </div>*@
                                    <div class="admin-tab">
                                        <a class="inadmin-link" id="adocument1" href="../OfficeExpenses/ExpenseLedger" ><span>My Business Expenses</span>
                                        </a>
                                    </div>
                                    @*<div class="admin-tab">
                                        <a class="inadmin-link" id="adocument" href="../Notes/ProfileNotes"><span>Notes</span>
                                        </a>
                                    </div>*@
                                         <div class="admin-tab">
                                        <a class="inadmin-link" id="adocument2" href="../Common/PasswordManagement" ><span>Password Management</span>
                                        </a>
                                    </div>
                                    <div class="admin-tab">
                                        <a class="inadmin-link" id="adocument3" href="../Admin/FT_servicesTransaction" ><span>Mower Helper Transactions</span>
                                        </a>
                                    </div>
                                     @if (ViewBag.Showtask == "Y")
                                     {
                                    <div class="admin-tab">
                                        <a class="inadmin-link" id="adocument4" href="../Task/TaskList" ><span>Tasks</span>
                                        </a>
                                    </div>
                                     }
                                     @* <div class="admin-tab">
                                        <a class="inadmin-link" id="adocument5" href="@Url.Action("Index","Technicians")" ><span>Technicians</span>
                                        </a>
                                    </div>*@
                                   <div class="admin-tab">
                                    <a class="inadmin-link" href="../Admin/FTservices_addnewpayment" id="acontent"><span>Payment method</span>
                                    </a>
                                </div>
                                    <div class="admin-tab">                                        
                                        <a class="admin-link" href="../Messages/MessageFromhelp" id="amsgcontent"><span>Messages</span></a>
                                    </div>
                                    @*<div class="admin-tab">                                        
                                        <a class="inadmin-link" href="../Article/ArticleJqGrid" id="aArticles"><span>Articles</span></a>
                                    </div>*@
                                    @if(ViewBag.Showforums=="Y"){
                                      <div class="admin-tab">
                                    <a class="inadmin-link" href="../Forums/ForumsHome" id="acontent5"><span>Forums</span>
                                    </a>
                                </div>
                                    }
                                </td>
                            </tr>
                  }
                            <tr class="background_color">
                                <td id="tdtabs1" class="tab-background"   width="100%">
                                    <div>
            @{Html.RenderAction("Msg_Main", "Messages", new { @Tabid = "2" });}
        </div>
                                   <br />
                        <table width="100%" cellpadding="0" cellspacing="0" border="0">
                            <tr id="trtabs">
                                <td width="100%" class="navigation">
                                    <div class="admin-tab">
                                       @* @{int FromThhelpCount = Convert.ToInt32(ViewBag.FromThhelpCount);}*@
                                        <a class="admin-link" href="MessageFromHelp" id="afromtherapisthelp"><span id="FromTennisHelp"></span>   @*<span>From Mower Helper-Find an Mower Helper&nbsp;&nbsp;(@FromThhelpCount)</span>*@
                                        </a>
                                    </div>

                                    @if (ViewBag.Roleid != "31" && ViewBag.Roleid != "38" && ViewBag.ShowElectricians == "Y")
                                    {
                                        <div class="admin-tab">
                                            @{int FromPublicCount = Convert.ToInt32(ViewBag.FromPublicCount);}
                                            <a class="inadmin-link" id="aFrompubliclisting" href="PublicMessages"><span>From public profile page&nbsp;&nbsp;(@FromPublicCount)</span>
                                            </a>
                                        </div>
                                    }
                                    @if (ViewBag.Roleid == "31")
                                    {
                                        <div class="admin-tab">
                                            @{int supervisercnt = Convert.ToInt32(ViewBag.supervisercnt);}
                                            <a class="inadmin-link" id="afromverificationsuperviser" href="FromVerificationSupervisor"><span>From Verification Supervisor&nbsp;&nbsp;(@supervisercnt)</span>
                                            </a>
                                        </div>
                                    }
                                    @if (ViewBag.Roleid == "38")
                                    {
                                        <div class="admin-tab">
                                            @{int vusercount = Convert.ToInt32(ViewBag.vusercount);}
                                            <a class="inadmin-link" id="afromverificationuser" href="Fromverificationuser"><span>From Verification users&nbsp;&nbsp;(@vusercount)</span>
                                            </a>
                                        </div>
                                    }
                                    @if (ViewBag.Roleid == "4" && ViewBag.Showschedule == "Y" && ViewBag.ShowElectricians == "Y")
                                    {
                                        <div class="admin-tab">
                                            @{int vusercount = Convert.ToInt32(ViewBag.aptreqcount);}
                                            <a class="inadmin-link" id="aschedulemessage" href="ScheduleMessages"><span>Appointment Requests&nbsp;&nbsp;(@vusercount)</span>
                                            </a>
                                        </div>
                                    }

                                    <div class="admin-tab">
                                     @*   @{int Sentcount = Convert.ToInt32(ViewBag.Sentcount);}*@
                                        <a class="inadmin-link" id="aSentMessages" href="SentMessages"><span id="SentMessages"></span>   @* <span>Sent messages&nbsp;&nbsp;(@Sentcount)</span>*@
                                        </a>
                                    </div>

                                </td>
                            </tr>
                            <tr class="background_color">
                                <td id="tdtabs" class="tab-background" width="100%">
                                    <div class="content-box">
                                        <div class="content-box-header">
                                            <table id="Table1" cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
                                                <tr>
                                                    <td width="25%">
                                                        <h3>From Mower Helper</h3>
                                                    </td>
                                                    <td width="55%" align="center">
                                                        <ul style="list-style: none!important; padding-right: 5px; padding-top: 5px;" class="content-box-tabs">
                                                            <li><strong>Filter by :&nbsp;</strong>
                                                                @Html.DropDownList("ddlListingMsgsType", new List<SelectListItem>

                                                              {
                                                               new SelectListItem{ Text="New", Value = "New" },
                                                               new SelectListItem{ Text="Viewed", Value = "Viewed" },
                                                               new SelectListItem{ Text="Archived", Value = "Archived" },
                                                               new SelectListItem{ Text="All", Value = "All" }, 
                                                               new SelectListItem{ Text="New/Viewed", Value = "NEWviewed" }, 
                                                              },
                                                             new { onchange = "return ddlchange()", style = "font-family:arial;font-size:13px;height:20px;width:120px;" })
                                                            </li>
                                                        </ul>
                                                    </td>
                                                  @*  @if (Convert.ToInt32(ViewBag.totrec) > 0)
                                                    {
                                                        *@<td width="20%" align="center">
                                                            <ul style="list-style: none!important; padding-right: 5px; padding-top: 5px;" class="content-box-tabs">
                                                                <li><strong>Rows per page :&nbsp;</strong>
                                                                   @* @{Html.RenderAction("Rowsperpage", "Profiles", new { @id = "1" });}*@
                                                                            @Html.DropDownList("ddlrecords", new List<SelectListItem>

                                                              {
                                                               new SelectListItem{ Text="5", Value = "5" },
                                                               new SelectListItem{ Text="10", Value = "10" },
                                                               new SelectListItem{ Text="15", Value = "15" },
                                                               new SelectListItem{ Text="20", Value = "20" }, 
                                                               new SelectListItem{ Text="25", Value = "25" }, 
                                                               new SelectListItem{ Text="30", Value = "30" }, 
                                                               new SelectListItem{ Text="35", Value = "35" },
                                                               new SelectListItem{ Text="40", Value = "40" },
                                                               new SelectListItem{ Text="45", Value = "45" },
                                                               new SelectListItem{ Text="50", Value = "50" }, 
                                                              },
                                                             new { onchange = "return ddlrecordsNo()", style = "font-family:arial;font-size:13px;height:20px;width:48px;" })
                                                                </li>
                                                            </ul>
                                                        </td>
                                                 @*   }*@
                                                </tr>
                                            </table>
                                            <div class="clear">
                                            </div>
                                        </div>
                                         <div id="MessageFrom">
                                                <img src="../Images/ajax-loader2.gif" alt="Processing" style="margin-left:550px"/>

                                      </div>
                                    </div>
                                </td>
                            </tr>
                        </table> 
                                    </td></tr>
                             </table>
                    </td>
                </tr>
            </table>
        </div>
        <div id="dialog-confirm" title="Mower Helper" style="display: none;">
            <p>
                <span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 20px 0;"></span>
                Do you want to archive the message?
            </p>
        </div>
        <div id="TopicDialog" title="Message details">
        </div>
        <div id="ReplyDialog" title="Message reply">
        </div>
        <div id="dvLoading" style="display: none; text-align: center; vertical-align: middle">
            <img src="../Images/ajax-loader2.gif" alt="Processing" />
        </div>
        <input id="hdntype" type="hidden" value="@ViewBag.Type"/>
        <input id="hdnpagesize" type="hidden" value="@ViewBag.Thpagesize"/>
      
        <script type="text/javascript">
            $(".confirmDialog").live("click", function (e) {

                var url = $(this).attr('href') + "&ddlListingMsgsType=" + $('#ddlListingMsgsType').val() + "&ddlrecords=" + $('#ddlrecords').val() + "&curPage=" + curPage;
                $("#dialog-confirm").dialog({
                    autoOpen: false,
                    height: 170,
                    width: 350,
                    show: { effect: 'drop', direction: "up" },
                    modal: true,
                    buttons: {
                        "Yes": function () {
                            $(this).dialog("close");
                            $('#dvLoading').dialog({ modal: true, dialogClass: 'dvLoading', draggable: false, resizable: false });
                            $("#MessageFrom").load(url, function (data) { $('#dvLoading').dialog("close"); });
                        },
                        "No": function () {
                            $(this).dialog("close");

                        }
                    }
                });
                $("#dialog-confirm").dialog('open');
                return false;
            });
            var linkObj;
            $(function () {
                $('#TopicDialog').dialog({
                    autoOpen: false,
                    width: 1000,
                    resizable: false,
                    modal: true,
                    close: function () {
                        @* window.location.href = '@Url.Action("MessageFromHelp", "Messages")';*@
                        @*    $("#MessageFrom").load("@Url.Action("DisplayMessageFromHelp", "Messages")", function (data) { });*@
                     
                    }
                });
                $('#ReplyDialog').dialog({
                    autoOpen: false,
                    width: 1000,
                    resizable: false,
                    modal: true

                });
              
            });
        </script>

    }
    <script type="text/javascript">
        $(document).ready(function () {
            $("#MessageFrom").load("@Url.Action("DisplayMessageFromHelp", "Messages")?ddlListingMsgsType=" + $('#ddlListingMsgsType').val() + "&ddlrecords=" + $('#ddlrecords').val(), function (data) { });
            var TopIndex = '@Session["TopIndex"]';
            $("#Menu0").removeClass();
            $("#Menu1").removeClass();
            $("#Menu2").removeClass();
            $("#Menu4").addClass("active");
            $("#Menu3").removeClass();
        });
        function ddlchange() {
            $('#dvLoading').dialog({ modal: true, dialogClass: 'dvLoading', draggable: false, resizable: false });
            $("#MessageFrom").load("@Url.Action("DisplayMessageFromHelp", "Messages")?ddlListingMsgsType=" + $('#ddlListingMsgsType').val() + "&ddlrecords=" + $('#ddlrecords').val(), function (data) { $('#dvLoading').dialog("close"); });
        }
        function ddlrecordsNo() {
            $('#dvLoading').dialog({ modal: true, dialogClass: 'dvLoading', draggable: false, resizable: false });
            $("#MessageFrom").load("@Url.Action("DisplayMessageFromHelp", "Messages")?ddlListingMsgsType=" + $('#ddlListingMsgsType').val() + "&ddlrecords=" + $('#ddlrecords').val(), function (data) { $('#dvLoading').dialog("close"); });
            }
    </script>
</body>
</html>
